#/usr/bin/bash

# Secure Messaging Menu Script 
# Written by John Shearing with much help from the open source community.

# This is a simple GUI for gpg secure messaging between PrivateKeyVaults or other Linux airgapped devices.

clear;

# Ask user to choose a task.
task=$(zenity --list \
--title="PrivateKeyVault Secure Messaging Services" \
--text="Select a task from the menu" \
--width 1000 \
--height 1000 \
--column "Task" --column "Description" \
"mew" "Launch MyEtherWallet" \
"strtfm" "Manage files" \
"strtlfpd" "Read or write a message" \
"ncrypt" "Encrypt a text file" \
"qrflash" "Export a text file to screen as a parade of QR-Codes" \
"recvid" "Import a QR_Coded video and extract the text" \
"dcrypt" "Decrypt a text file" \
"qrvid2txt" "Extract text from an MP4 video file containing QR-Codes" \
"fingerprint" "Show fingerprint for public keys" \
"list-keys" "Display info about public keys" \
"list-secret-keys" "Display info about secret keys" \
"txt2rings" "Import a public or private key from a text file" \
"pub2txt" "Export a public key to a text file" \
"priv2txt" "Export a private key to a text file" \
"gen-key" "Generate a Public / Private key pair" \
"delpub" "Delete a public key" \
"delprv" "Delete a private key" \
2>/dev/null);

# if user cancels, exit
if [ $? == 1 ] || [ $task == ""]; then exit; fi

clear;

# Execute the chosen operation.
if [[ $task = mew ]]; then
mew
elif [[ $task = strtfm ]]; then
strtfm
elif [[ $task = strtlfpd ]]; then
strtlfpd
elif [[ $task = ncrypt ]]; then
ncrypt 
elif [[ $task = qrflash ]]; then
qrflash
elif [[ $task = recvid ]]; then
recvid
elif [[ $task = dcrypt ]]; then
dcrypt
elif [[ $task = qrvid2txt ]]; then
qrvid2txt
elif [[ $task = fingerprint ]]; then
fingerprint
elif [[ $task = list-keys ]]; then
gpg --list-keys
elif [[ $task = list-secret-keys ]]; then
gpg --list-secret-keys
elif [[ $task = txt2rings ]]; then
txt2rings
elif [[ $task = pub2txt ]]; then
pub2txt
elif [[ $task = priv2txt ]]; then
priv2txt
elif [[ $task = "gen-key" ]]; then
gpg --gen-key
elif [[ $task = "delpub" ]]; then
delpub
elif [[ $task = "delprv" ]]; then
delprv
fi

